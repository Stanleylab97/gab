{% extends 'base.html.twig' %}

{% block styleheader %}
	<meta
	charset="utf-8">
	<!-- Nous chargeons les fichiers CDN de Leaflet. Le CSS AVANT le JS -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css"/>
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css"/>

	<style type="text/css">
		#map {
			/* la carte DOIT avoir une hauteur sinon elle n'apparaît pas */
			height: 800px;
			margin: 30px;
		}
	</style>

{% endblock %}

{% block content %}
	<div id="banner-area">
		<img src="images/banner/banner1.jpg" alt=""/>
		<div class="parallax-overlay"></div>
		<!-- Subpage title start -->
		<div class="banner-title-content">
			<div class="text-center">
				<h2>Notre réseau</h2>
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb justify-content-center">
						<li class="breadcrumb-item">
							<a href="{{path('accueil')}}">Accueil</a>
						</li>
						<li class="breadcrumb-item text-white" aria-current="devis">Réseau</li>
					</ol>
				</nav>
			</div>
		</div>
		<!-- Subpage title end -->
	</div>
	<!-- Banner area end -->
	<br>
	<div id="map"></div>

{% endblock %}

{% block javascripts %}
	<!-- jQuery -->
	<script src="plugins/jQuery/jquery.min.js"></script>
	<!-- Bootstrap JS -->
	<script src="plugins/bootstrap/bootstrap.min.js"></script>
	<!-- Style Switcher -->
	<script type="text/javascript" src="plugins/style-switcher.js"></script>
	<!-- Owl Carousel -->
	<script type="text/javascript" src="plugins/owl/owl.carousel.js"></script>
	<!-- PrettyPhoto -->
	<script type="text/javascript" src="plugins/jquery.prettyPhoto.js"></script>
	<!-- Bxslider -->
	<script type="text/javascript" src="plugins/flex-slider/jquery.flexslider.js"></script>
	<!-- CD Hero slider -->
	<script type="text/javascript" src="plugins/cd-hero/cd-hero.js"></script>
	<!-- Isotope -->
	<script type="text/javascript" src="plugins/isotope.js"></script>
	<script type="text/javascript" src="plugins/ini.isotope.js"></script>
	<!-- Wow Animation -->
	<script type="text/javascript" src="plugins/wow.min.js"></script>
	<!-- Eeasing -->
	<script type="text/javascript" src="plugins/jquery.easing.1.3.js"></script>
	<!-- Counter -->
	<script type="text/javascript" src="plugins/jquery.counterup.min.js"></script>
	<!-- Waypoints -->
	<script type="text/javascript" src="plugins/waypoints.min.js"></script>

	<!-- Main Script -->
	<script src="js/script.js"></script>

	<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
	<script type='text/javascript' src='https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js'></script>
	<script type="text/javascript">
		// On initialise la latitude et la longitude de Paris (centre de la carte)
var lat = 9.339984;
var lon = 2.618863;
var macarte = null;
var markerClusters;
// Servira à stocker les groupes de marqueurs
// Nous initialisons une liste de marqueurs
var villes = {
"Kandi": {
"lat": 11.224170, 
"lon": 2.821690
},
"Parakou": {
"lat": 9.339984,
"lon": 2.618863
},
"Natitingou": {
"lat": 10.291144,
"lon": 1.378504
},
"Tanguiéta": {
"lat": 10.616995,
"lon": 1.263556
},
"Djougou": {
"lat": 9.7081748,
"lon": 1.6487284
},
"Bantè": {
"lat": 8.415404,
"lon": 1.889734
},
"Tchaourou": {
"lat": 8.895840,
"lon": 2.580049
},
"Kétou": {
"lat": 7.359359,
"lon": 2.607064
},
"Bureau Direct Abomey": {
"lat": 7.180200,
"lon": 1.981315
},
"Bohicon": {
"lat": 7.172729,
"lon": 2.073369
},
"Comé": {
"lat": 6.405719,
"lon": 1.888232
},
"Bureau Direct Lokossa": {
"lat": 6.629653,
"lon": 1.721120
},
"Bureau Direct Azovè": {

"lat": 6.952158, 
"lon": 1.703739
},
"Dogbo": {
"lat": 6.792506,
"lon": 1.774592
},
"Bureau Direct Porto-Novo": {
"lat": 6.499292, 
"lon": 2.631427
},
"Bureau Direct Calavi": {
"lat": 6.431365, 
"lon": 2.349926
},
"Bureau Direct Steinmetz": {
"lat": 6.362866, 
"lon": 2.433760
},
"Bureau Direct Siège": {
"lat": 6.358767, 
"lon": 2.419845
},
 "Bureau Direct Menontin": {
"lat": 6.387620, 
"lon": 2.368460
},
"Bureau Direct Akpakpa": {
"lat": 6.366402, 
"lon": 2.453836
},
"Agence Assana AGP": {
"lat": 6.431405, 
"lon": 2.327862 
},

};
// Fonction d'initialisation de la carte
function initMap() { // Nous définissons le dossier qui contiendra les marqueurs
var iconBase = 'images/';

// Créer l'objet "macarte" et l'insèrer dans l'élément HTML qui a l'ID "map"
macarte = L.map('map').setView([
lat, lon
], 8);
markerClusters = L.markerClusterGroup();
// Nous initialisons les groupes de marqueurs
// Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr
L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', { // Il est toujours bien de laisser le lien vers la source des données
attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
minZoom: 1,
maxZoom: 20
}).addTo(macarte);
// Nous parcourons la liste des villes
for (ville in villes) { // Nous définissons l'icône à utiliser pour le marqueur, sa taille affichée (iconSize), sa position (iconAnchor) et le décalage de son ancrage (popupAnchor)
var myIcon = L.icon({
iconUrl: iconBase + "logomap.png",
iconSize: [
50, 50
],
iconAnchor: [
25, 50
],
popupAnchor: [-3, -76]
});
var marker = L.marker([
villes[ville].lat,
villes[ville].lon
], {icon: myIcon}); // pas de addTo(macarte), l'affichage sera géré par la bibliothèque des clusters

marker.bindPopup(ville);
markerClusters.addLayer(marker); // Nous ajoutons le marqueur aux groupes
}
macarte.addLayer(markerClusters);
}
window.onload = function () { // Fonction d'initialisation qui s'exécute lorsque le DOM est chargé
initMap();
};
	</script>
{% endblock %}
